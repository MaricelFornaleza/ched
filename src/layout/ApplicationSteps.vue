<template>
  <div class="p-10">
    <div class="font-bold uppercase mb-3">{{ hei }}</div>
    <div class="bg-light-100 h-full w-full p-5 text-center">
      <div class="flex border border-light-300 border-2">
        <div
          v-for="step in steps"
          :key="step.no"
          @click="activeStep(step.no)"
          class="step z-50 flex items-center pl-3 cursor-pointer"
          :class="[
            currentStep === step.no ? 'active' : '',
            step.completed ? 'completed' : '',
          ]"
        >
          <div class="flex items-center space-x-3">
            <div
              class="
                rounded-full
                flex
                items-center
                justify-center
                border border-2
                h-10
                w-10
              "
              :class="[
                currentStep === step.no
                  ? 'bg-brand-blue border-brand-blue text-light-100'
                  : 'border-light-400',
                step.completed ? 'border-light-100' : '',
              ]"
            >
              {{ step.no }}
            </div>
            <div class="text-xs text-left">
              <div class="uppercase font-bold">Step {{ step.no }}</div>
              <div class="hidden lg:block">{{ step.title }}</div>
            </div>
          </div>
        </div>
      </div>
      <router-view @complete="completeStep" @nextStep="nextStep"></router-view>
    </div>
  </div>
</template>
<script>
import router from "../router";
export default {
  data() {
    return {
      hei: "",
      currentStep: 1,
      steps: [
        { no: 1, title: "Notarized Transmittal Letter", completed: false },
        { no: 2, title: "Proof", completed: false },
        { no: 3, title: "List of Graduates", completed: false },
        { no: 4, title: "Application for Approval", completed: false },
        { no: 5, title: "Application Complete", completed: false },
      ],
    };
  },
  created() {
    this.hei = this.$route.params.hei;
  },
  methods: {
    activeStep(step) {
      this.currentStep = step;
      router.push({
        name: "Step" + this.currentStep,
        params: { step: this.currentStep, hei: this.hei },
      });
    },
    completeStep(currentStep) {
      this.steps.forEach((step) => {
        if (step.no === currentStep) {
          step.completed = true;
        }
      });
    },
    nextStep() {
      if (this.currentStep < 5) {
        this.currentStep++;
        router.push({
          name: "Step" + this.currentStep,
          params: { step: this.currentStep, hei: this.hei },
        });
      }
    },
    previousStep() {
      if (this.currentStep > 1) {
        this.currentStep--;
        router.push({
          name: "Step" + this.currentStep,
          params: { step: this.currentStep, hei: this.hei },
        });
      }
    },
  },
  components: {},
};
</script>


<style>
.step {
  position: relative;
  width: 20%;
  height: 100px;
  margin-left: 0;
  color: theme("colors.dark.300");
  background-color: theme("colors.light.300");
  text-align: center;
}
.step:after {
  content: "";
  position: absolute;
  left: 100%;
  top: 0px;
  width: 0px;
  height: 0px;
  border-top: 50px solid transparent;
  border-left: 20px solid theme("colors.light.300");
  border-bottom: 50px solid transparent;
}
.step:nth-of-type(1) {
  z-index: 5;
}
.step:nth-of-type(2) {
  z-index: 4;
  padding-left: 25px;
}
.step:nth-of-type(3) {
  z-index: 3;
  padding-left: 25px;
}
.step:nth-of-type(4) {
  z-index: 2;
  padding-left: 25px;
}
.step:nth-of-type(5) {
  z-index: 1;
  padding-left: 25px;
}
.active {
  background-color: theme("colors.light.100");
  color: theme("colors.brand.blue");
}
.active:after {
  border-left: 20px solid theme("colors.light.100");
}
.completed {
  background-color: theme("colors.brand.blue");
  color: theme("colors.light.100");
}
.completed:after {
  border-left: 20px solid theme("colors.brand.blue");
}
.step:nth-of-type(5):after,
.completed:nth-of-type(5):after {
  border-left: 0px !important;
}
</style>  